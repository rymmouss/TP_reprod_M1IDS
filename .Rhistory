df$tension_arterielle <- str_replace(df$tension_arterielle, "-", "/")
# on ajoute /NA dans les cases ou il y a qu'un nombre
df$tension_arterielle <- ifelse(str_detect(df$tension_arterielle, "/"),
df$tension_arterielle,
paste0(df$tension_arterielle, "/NA"))
# On separe la colonne en deux (tension systolique et tension diastolique)
df <- separate(df, tension_arterielle, into = c("Tension_Sys", "Tension_Dia"), sep = "/", convert = TRUE)
# DIAGNOSTIC ET TRAITEMENT:
# On vide les cases "nan"
df$diagnostic[df$diagnostic == "nan"] <- NA
df$traitement[df$traitement == "nan"] <- NA
# On remplace le vide par "Non renseigné"
df$diagnostic <- replace_na(df$diagnostic, "Non renseigné")
df$traitement <- replace_na(df$traitement, "Non renseigné")
# 2. Analyse exploratoire:
# Les indicateurs clés: IMC, age, sexe
# 1. Calcul de l'IMC:la formule IMC = poids(kg)/ taille(m²), sans oublier de convertir la taille du cm en mètres
df$IMC <- df$poids / ( (df$taille / 100) ^ 2 )
df$IMC <- round(df$IMC, 1)
# 2. Calcul des moyennes (IMC et Age):
# Age moyen:
print("Âge moyen des patients :")
print(mean(df$age, na.rm = TRUE))
# IMC moyen:
print("IMC moyen des patients :")
print(mean(df$IMC, na.rm = TRUE))
# 3. Répartition par sexe:
print("Nombre de patients par Sexe :")
print(table(df$sexe))
# 3. Visualisation des données:
# Graphiques des consultations:
df$mois_consultation <- floor_date(df$date_consultation, "month")
ggplot(df, aes(x = mois_consultation)) +
geom_bar(fill = "steelblue", color = "white") +
labs(
title = "Évolution des Consultations (2025)",
subtitle = "Regroupement mensuel",
x = "Mois",
y = "Nombre de consultations"
) +
theme_minimal() +
# Affiche les mois proprement (Janvier, Février...)
scale_x_date(date_labels = "%B", date_breaks = "1 month")
ggplot(df, aes(x = date_consultation)) +
geom_bar(fill = "steelblue", color = "white") +
title = "Évolution des Consultations",
ggplot(df, aes(x = date_consultation)) +
geom_bar(fill = "steelblue", color = "white") +
labs(
title = "Évolution des Consultations",
x = "Dates",
y = "Nombre de patients"
) +
theme_minimal()
ggplot(df, aes(x = floor_date(date_consultation, "month"))) +
geom_bar(fill = "steelblue", color = "white") +
labs(
title = "Évolution des Consultations par Mois",
x = "Mois (2025)",
y = "Nombre de consultations"
) +
scale_x_date(date_labels = "%B", date_breaks = "1 month") +
theme_minimal()
ggplot(df, aes(x = floor_date(date_consultation, "month"))) +
geom_bar(fill = "steelblue", color = "white") +
labs(
title = "Consultations mensuelles 2025",
x = "Mois (2025)",
y = "Nombre de consultations"
) +
scale_x_date(date_labels = "%B", date_breaks = "1 month") +
theme_minimal()
ggplot(df, aes(x = floor_date(date_consultation, "month"))) +
geom_bar(fill = "steelblue", color = "white") +
labs(
title = "Consultations mensuelles 2025",
x = "Mois",
y = "Nombre de consultations"
) +
scale_x_date(date_labels = "%B", date_breaks = "1 month") +
theme_minimal()
# On regroupe les jours en mois en utilisant floor_date
ggplot(df, aes(x = floor_date(date_consultation, "month"))) +
# On dessine les barres
geom_bar(fill = "steelblue", color = "white") +
# les titres
labs(
title = "Consultations mensuelles 2025",
x = "Mois",
y = "Nombre de consultations"
) +
scale_x_date(date_labels = "%B", date_breaks = "1 month") +
theme_minimal()
# Graphiques des consultations:
# On compte le nombre de patients par date
df_evolution <- df %>%
filter(!is.na(date_consultation)) %>% # On enlève les dates vides
count(date_consultation)
# On trace la courbe
ggplot(df_evolution, aes(x = date_consultation, y = n)) +
# On trace la courbe
ggplot(df_evolution, aes(x = date_consultation, y = n)) +
# On dessine la ligne et les points
geom_line(color = "steelblue", linewidth = 1) +
geom_point(color = "steelblue", size = 3) +
# les titres
labs(
title = "Évolution des Consultations",
subtitle = "Suivi bi-mensuel des visites",
x = "Date",
y = "Nombre de patients"
) +
# On trace la courbe
ggplot(df_evolution, aes(x = date_consultation, y = n)) +
# On dessine la ligne et les points
geom_line(color = "steelblue", linewidth = 1) +
geom_point(color = "steelblue", size = 3) +
# les titres
labs(
title = "Évolution des Consultations",
subtitle = "Suivi bi-mensuel des visites",
x = "Date",
y = "Nombre de patients"
) +
scale_x_date(date_labels = "%d %b", date_breaks = "2 weeks") +
theme_minimal()
# GRAPHIQUE 1 : Évolution des Consultations (CORRIGÉ)
# On utilise la bibliothèque lubridate pour regrouper par mois
ggplot(df, aes(x = floor_date(date_consultation, "month"))) +
# On dessine les barres
geom_bar(fill = "steelblue", color = "white") +
# Titres
labs(
title = "Évolution des Consultations par Mois",
x = "Mois (2025)",
y = "Nombre de consultations"
) +
# On affiche les mois proprement en bas
scale_x_date(date_labels = "%B", date_breaks = "1 month") +
theme_minimal()
# Graphique : Relation entre Taille/ Poids par sexe
# On enleve les sexes "non renseigné"
df_graph_relation <- df %>% filter(sexe != "Non renseigné")
ggplot(df_graph_relation, aes(x = taille, y = poids, color = sexe)) +
ggplot(df_graph_relation, aes(x = taille, y = poids, color = sexe)) +
ggplot(df_graph_relation, aes(x = taille, y = poids, color = sexe)) +
geom_point(size = 3, alpha = 0.7) +
ggplot(df_graph_relation, aes(x = taille, y = poids, color = sexe)) +
geom_point(size = 3, alpha = 0.7) +
# Les titres
labs(
title = "Relation entre le Poids et la Taille",
subtitle = "Comparaison Hommes / Femmes",
x = "Taille (cm)",
y = "Poids (kg)",
color = "Sexe"
) +
theme_minimal()
# Création du scatterplot
ggplot(df_graph_relation, aes(x = taille, y = poids, color = sexe)) +
geom_point(size = 3, alpha = 0.7) +
# Les titres
labs(
title = "Relation entre le Poids et la Taille",
subtitle = "Analyse de la corrélation par Sexe",
x = "Taille (cm)",
y = "Poids (kg)",
color = "Sexe"
) +
theme_minimal()
# GRAPHIQUE 3 (AMÉLIORÉ) : Poids selon la Taille et le Sexe
# Technique : On utilise des "Boîtes à Moustaches" par catégorie de taille.
# 1. On nettoie et on CRÉE DES GROUPES DE TAILLE
df_graph_box <- df %>%
filter(sexe != "Non renseigné") %>%
filter(!is.na(sexe)) %>%
mutate(groupe_taille = cut(taille,
breaks = c(0, 165, 175, 300),
labels = c("Moins de 165cm", "165-175cm", "Plus de 175cm")))
# 2. On trace les Boîtes à Moustaches
ggplot(df_graph_box, aes(x = groupe_taille, y = poids, fill = sexe)) +
# geom_boxplot résume les données (la barre noire au milieu est la médiane)
geom_boxplot() +
# Titres clairs
labs(
title = "Distribution du Poids selon la Taille et le Sexe",
subtitle = "Comparaison par catégories de taille",
x = "Catégorie de Taille",
y = "Poids (kg)",
fill = "Sexe"
) +
theme_minimal()
# Chargement des librairies
library(tidyverse)
library(lubridate)
# Charegement du fichier
df <- read_csv(file.choose())
# 1. Nettoyage des données:
# LES NOMS:
# On remplace les cases "nan" et les cases vides par anonyme afin de conserver les donnees medicales associees aux patients
df$nom_patient[df$nom_patient == "nan"] <- "Anonyme"
df$nom_patient <- replace_na(df$nom_patient, "Anonyme")
# LE SEXE:
# On uniformise les femmes (F et Femme -> F)
df$sexe[df$sexe == "Femme"] <- "F"
df$sexe[df$sexe == "F"] <- "F"
# On uniformise les hommes (M, H et Homme => H)
df$sexe[df$sexe == "Homme"] <- "H"
df$sexe[df$sexe == "H"] <- "H"
df$sexe[df$sexe == "M"] <- "H"
# Les autres cas (nan, vide, autre) -> "Non renseigné"
# on a remplacé autre par non renseigné pour conserver les patients dans l'étude sans fausser les ratios Homme/Femme
df$sexe[df$sexe == "Autre"] <- "Non renseigné"
df$sexe[df$sexe == "nan"]   <- "Non renseigné"
df$sexe[is.na(df$sexe)] <- "Non renseigné"
# LES DATES:
# Nettoyage des nan en vidant leurs cases
df$date_consultation[df$date_consultation == "nan"] <- NA
# Transformation du texte en date
df$date_consultation <- dmy(df$date_consultation)
# Confirmation que la colonne date_consutation est une date
class(df$date_consultation)
# LES VALEURS ABERRANTES:
# L'age: on corrige les valeurs negatives
df$age <- abs(df$age)
# Le poids: on corrige les valeurs negatives
df$poids <- abs(df$poids)
# La taille: on garde les tailles entre 50cm et 250cm, le reste on met NA
df$taille <- ifelse(df$taille <50 | df$taille > 250, NA, df$taille)
# LA TENSION ARTERIELLE:
# On vide les cases "nan"
df$tension_arterielle[df$tension_arterielle == "nan"] <- NA
# On remplace les tirets "-" par des slashs "/"
df$tension_arterielle <- str_replace(df$tension_arterielle, "-", "/")
# on ajoute /NA dans les cases ou il y a qu'un nombre
df$tension_arterielle <- ifelse(str_detect(df$tension_arterielle, "/"),
df$tension_arterielle,
paste0(df$tension_arterielle, "/NA"))
# On separe la colonne en deux (tension systolique et tension diastolique)
df <- separate(df, tension_arterielle, into = c("Tension_Sys", "Tension_Dia"), sep = "/", convert = TRUE)
# DIAGNOSTIC ET TRAITEMENT:
# On vide les cases "nan"
df$diagnostic[df$diagnostic == "nan"] <- NA
df$traitement[df$traitement == "nan"] <- NA
# On remplace le vide par "Non renseigné"
df$diagnostic <- replace_na(df$diagnostic, "Non renseigné")
df$traitement <- replace_na(df$traitement, "Non renseigné")
# 2. Analyse exploratoire:
# Les indicateurs clés: IMC, age, sexe
# a. Calcul de l'IMC:la formule IMC = poids(kg)/ taille(m²), sans oublier de convertir la taille du cm en mètres
df$IMC <- df$poids / ( (df$taille / 100) ^ 2 )
df$IMC <- round(df$IMC, 1)
# b. Calcul des moyennes (IMC et Age):
# Age moyen:
print("Âge moyen des patients :")
print(mean(df$age, na.rm = TRUE))
# IMC moyen:
print("IMC moyen des patients :")
print(mean(df$IMC, na.rm = TRUE))
# c. Répartition par sexe:
print("Nombre de patients par Sexe :")
print(table(df$sexe))
# 3. Visualisation des données:
# Graphiques des consultations:
# On regroupe les jours en mois en utilisant floor_date
ggplot(df, aes(x = floor_date(date_consultation, "month"))) +
# On dessine les barres
geom_bar(fill = "steelblue", color = "white") +
# les titres
labs(
title = "Consultations mensuelles 2025",
x = "Mois",
y = "Nombre de consultations"
) +
scale_x_date(date_labels = "%B", date_breaks = "1 month") +
theme_minimal()
# Graphique : Relation entre Taille/ Poids par sexe
# On enleve les sexes "non renseigné"
df_graph_relation <- df %>%
filter(sexe != "Non renseigné")
filter(!is.na(sexe))
View(df_graph_relation)
names(df)
# Graphiques des consultations:
# On regroupe les jours en mois en utilisant floor_date
ggplot(df, aes(x = floor_date(date_consultation, "month"))) +
# On dessine les barres
geom_bar(fill = "steelblue", color = "white") +
# les titres
labs(
title = "Consultations mensuelles 2025",
x = "Mois",
y = "Nombre de consultations"
) +
scale_x_date(date_labels = "%B", date_breaks = "1 month") +
theme_minimal()
# Graphique : Relation entre Taille/ Poids par sexe
# On enleve les sexes "non renseigné"
df_graph_relation <- df %>%
filter(sexe != "Non renseigné")
filter(!is.na(sexe))
df_graph_relation <- df %>%
filter(sexe != "Non renseigné")
filter(!is.na(sexe))
# Graphique : Relation entre Taille/ Poids par sexe
# On enleve les sexes "non renseigné"
df_graph_relation <- df %>%
filter(sexe != "Non renseigné") %>%
filter(!is.na(sexe))
# Création du scatterplot
ggplot(df_graph_relation, aes(x = taille, y = poids, color = sexe)) +
geom_point(size = 3, alpha = 0.7) +
# Les titres
labs(
title = "Relation entre le Poids et la Taille",
subtitle = "Analyse de la corrélation par Sexe",
x = "Taille (cm)",
y = "Poids (kg)",
color = "Sexe"
) +
theme_minimal()
# Chargement des librairies
library(tidyverse)
library(lubridate)
# Charegement du fichier
df <- read_csv(file.choose())
# 1. Nettoyage des données:
# LES NOMS:
# On remplace les cases "nan" et les cases vides par anonyme afin de conserver les donnees medicales associees aux patients
df$nom_patient[df$nom_patient == "nan"] <- "Anonyme"
df$nom_patient <- replace_na(df$nom_patient, "Anonyme")
# LE SEXE:
# On uniformise les femmes (F et Femme -> F)
df$sexe[df$sexe == "Femme"] <- "F"
df$sexe[df$sexe == "F"] <- "F"
# On uniformise les hommes (M, H et Homme => H)
df$sexe[df$sexe == "Homme"] <- "H"
df$sexe[df$sexe == "H"] <- "H"
df$sexe[df$sexe == "M"] <- "H"
# Les autres cas (nan, vide, autre) -> "Non renseigné"
# on a remplacé autre par non renseigné pour conserver les patients dans l'étude sans fausser les ratios Homme/Femme
df$sexe[df$sexe == "Autre"] <- "Non renseigné"
df$sexe[df$sexe == "nan"]   <- "Non renseigné"
df$sexe[is.na(df$sexe)] <- "Non renseigné"
# LES DATES:
# Nettoyage des nan en vidant leurs cases
df$date_consultation[df$date_consultation == "nan"] <- NA
# Transformation du texte en date
df$date_consultation <- dmy(df$date_consultation)
# Confirmation que la colonne date_consutation est une date
class(df$date_consultation)
# LES VALEURS ABERRANTES:
# L'age: on corrige les valeurs negatives
df$age <- abs(df$age)
# Le poids: on corrige les valeurs negatives
df$poids <- abs(df$poids)
# La taille: on garde les tailles entre 50cm et 250cm, le reste on met NA
df$taille <- ifelse(df$taille <50 | df$taille > 250, NA, df$taille)
# LA TENSION ARTERIELLE:
# On vide les cases "nan"
df$tension_arterielle[df$tension_arterielle == "nan"] <- NA
# On remplace les tirets "-" par des slashs "/"
df$tension_arterielle <- str_replace(df$tension_arterielle, "-", "/")
# on ajoute /NA dans les cases ou il y a qu'un nombre
df$tension_arterielle <- ifelse(str_detect(df$tension_arterielle, "/"),
df$tension_arterielle,
paste0(df$tension_arterielle, "/NA"))
# On separe la colonne en deux (tension systolique et tension diastolique)
df <- separate(df, tension_arterielle, into = c("Tension_Sys", "Tension_Dia"), sep = "/", convert = TRUE)
# DIAGNOSTIC ET TRAITEMENT:
# On vide les cases "nan"
df$diagnostic[df$diagnostic == "nan"] <- NA
df$traitement[df$traitement == "nan"] <- NA
# On remplace le vide par "Non renseigné"
df$diagnostic <- replace_na(df$diagnostic, "Non renseigné")
df$traitement <- replace_na(df$traitement, "Non renseigné")
# 2. Analyse exploratoire:
# Les indicateurs clés: IMC, age, sexe
# a. Calcul de l'IMC:la formule IMC = poids(kg)/ taille(m²), sans oublier de convertir la taille du cm en mètres
df$IMC <- df$poids / ( (df$taille / 100) ^ 2 )
df$IMC <- round(df$IMC, 1)
# b. Calcul des moyennes (IMC et Age):
# Age moyen:
print("Âge moyen des patients :")
print(mean(df$age, na.rm = TRUE))
# IMC moyen:
print("IMC moyen des patients :")
print(mean(df$IMC, na.rm = TRUE))
# c. Répartition par sexe:
print("Nombre de patients par Sexe :")
print(table(df$sexe))
# 3. Visualisation des données:
# Graphiques des consultations:
# On regroupe les jours en mois en utilisant floor_date
ggplot(df, aes(x = floor_date(date_consultation, "month"))) +
# On dessine les barres
geom_bar(fill = "steelblue", color = "white") +
# les titres
labs(
title = "Consultations mensuelles 2025",
x = "Mois",
y = "Nombre de consultations"
) +
scale_x_date(date_labels = "%B", date_breaks = "1 month") +
theme_minimal()
# Graphique : Relation entre Taille/ Poids par sexe
# On enleve les sexes "non renseigné"
df_graph_relation <- df %>%
filter(sexe != "Non renseigné") %>%
filter(!is.na(sexe))
# Création du scatterplot
ggplot(df_graph_relation, aes(x = taille, y = poids, color = sexe)) +
geom_point(size = 3, alpha = 0.7) +
# Les titres
labs(
title = "Relation entre le Poids et la Taille",
subtitle = "Analyse de la corrélation par Sexe",
x = "Taille (cm)",
y = "Poids (kg)",
color = "Sexe"
) +
theme_minimal()
cat("----------------------------------------------------------\n")
# --- CONFIGURATION ---
# Nom du fichier de comptages généré par le script Python précédent
input_counts_tsv <- "counts_final.tsv"
# Nom de votre fichier BED original (celui envoyé au tout début)
input_bed_file <- "CANOES.20251119-071825.bed"
# Nom du fichier RData de sortie (qui servira d'entrée à DECON)
output_rdata <- "DECON_input.RData"
# ---------------------
# 1. Chargement de la matrice de comptage
if (!file.exists(input_counts_tsv)) {
stop(paste("ERREUR: Le fichier", input_counts_tsv, "est introuvable."))
}
## INTRODUCTION
mean(c(1:100))
plot(x,y)
plot(x,y)
mean(c(1:100))
---
title: "TDS"
## INTRODUCTION
ici je calcule fjvndj
a + b
a + b
a<-2
a<-2
b<-4
a + b
```{r}
```{r}
## Graphique
```{r}
```
x <- c(1:1000)
y <- x/2 + rnorm(1000,0,100)
plot(x,y)
$x=x*\pi + \beta*z$
install.packages("ggplot2")
---
title: "fonction"
# une fonction de n qui return TRUE
nombre_pair_RymMOUSLI<-function(n)
{
if (n%%2==0)
return(TRUE)
else
return(FALSE
)
}
nombre_pair_RymMOUSLI(10)
nombre_pair_RymMOUSLI(7)
library(usethis)
install.packages("usethis")
install.packages("usethis")
library(usethis)
create_package()
setwd"C:/Users/ELITE COMPUTER/OneDrive - etu.unistra.fr/Bureau/TP_Techniques/TP_reprod_M1IDS"
setwd(C:/Users/ELITE COMPUTER/OneDrive - etu.unistra.fr/Bureau/TP_Techniques/TP_reprod_M1IDS)
setwd("C:/Users/ELITE COMPUTER/OneDrive - etu.unistra.fr/Bureau/TP_Techniques/TP_reprod_M1IDS")
create_package()
create_package("C:/Users/ELITE COMPUTER/OneDrive - etu.unistra.fr/Bureau/TP_Techniques/TP_reprod_M1IDS")
rlang::last_trace()
create_package(C:/Users/ELITE COMPUTER/OneDrive - etu.unistra.fr/Bureau/TP_Techniques/Nouveau dossier)
create_package("C:/Users/ELITE COMPUTER/OneDrive - etu.unistra.fr/Bureau/TP_Techniques/Nouveau dossier:)
create_package("C:/Users/ELITE COMPUTER/OneDrive - etu.unistra.fr/Bureau/TP_Techniques/Nouveau dossier")
nombre_pair_RymMOUSLI<-function(n)
{
if (n%%2==0)
return(TRUE)
else
return(FALSE
)
}
nombre_pair_RymMOUSLI(10)
nombre_pair_RymMOUSLI(7)
install.packages("usethis")
library(usethis)
create_package("C:/Users/ELITE COMPUTER/OneDrive - etu.unistra.fr/Bureau/TP_Techniques/Nouveau dossier")
create_package("C:/Users/ELITE COMPUTER/Desktop/myPack")
x <- c(1:1000)
y <- x/2 + rnorm(1000,0,100)
plot(x,y)
---
title: "TDS"
a<-2
b<-4
a + b
x <- c(1:1000)
y <- x/2 + rnorm(1000,0,100)
plot(x,y)
